#! /usr/bin/env node
var bees = require('../');

var fs = require('fs');

var argv = require('optimist')
  .usage('Usage: $0 -R [reporter] <file>')
  .demand(['_'])
  .argv;

var reporter = fs.existsSync(argv.R+'.js') && require(process.cwd()+'/'+argv.R+'.js') || JSON.stringify;

console.log(
  reporter(
    bees.parse(fs.readFileSync(argv._, 'utf-8'))
  )
);